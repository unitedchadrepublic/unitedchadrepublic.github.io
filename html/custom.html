<!DOCTYPE html>

<html lang="en" id="custom">

    <head>
        <meta charset="UTF-8">
        <title>Chad Star</title>
        <link rel="stylesheet" href="/css/style.css" type="text/css">
        <script src="script.js"></script> 
    </head>

    <body>
        <nav>
            <div class="topnav">
                <a class="active" href="/index.html">Home</a>
                <a class="books" href="books.html">Books</a>
                <a class="blocks" href="blocks.html">Blocks</a>
                <a class="items" href="items.html">Items</a>
                <a class="bedrock" href="bedrock.html">Bedrock</a>
                <a class="custom" href="custom.html" style="color:red;">Custom</a>
            </div>
        </nav>
        <!--
        Credit for form html+css
        https://www.youtube.com/watch?v=QT1ya4Ut40o
        -->
        <div id="overlay">
            <form onsubmit="sendContact(event); reset()">
                <h1 class="contact_us">Request Custom Services / Items</h1>

                <label for="email">Discord:</label>
                <input type="text" name="discord"id="email" placeholder="Your discord" required>

                <label for="message">Message:</label>
                <textarea id="message" name="message" placeholder="Message" rows="6" required></textarea>

                <div class="center">
                    <input type="submit" value="Send Message">
                </div>

                <script>
                    //credit: https://dev.to/mistval/discord-webhook-powered-contact-form-3lk6
                    async function sendContact(ev) {
                        ev.preventDefault();

                        const senderEmail = document
                        .getElementById('email').value;
                        const senderMessage = document
                        .getElementById('message').value;

                        const webhookBody = {
                        embeds: [{
                            title: 'New Custom Request!',
                            fields: [
                            { name: 'Sender', value: senderEmail },
                            { name: 'Message', value: senderMessage }
                            ]
                        }],
                        };

                        const webhookUrl = "https://discord.com/api/webhooks/1030624253806133300/u5BUGZ6nxJZm04wrPg_hbelwailFklJes5BpXPUsmFJhmUbspjrIObWoeZmaY5wsF7jP";

                        const response = await fetch(webhookUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(webhookBody),
                        });

                        if (response.ok) {
                        alert('Your message has been received!');
                        } else {
                        alert('There was an error! Try again later!');
                        }
                    }
                </script>
            </form>
    </body>

</html>
